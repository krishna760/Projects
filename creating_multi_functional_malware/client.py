import socket

class Client:
    def __init__(self, host, port) -> None:
        self.host = host
        self.port = port
    def connect(self):
        self.soc = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.soc.connect((self.host, self.port))
        print(f"conneted to {self.host} on port {self.port}")

    def send_command(self, command):
        self.soc.sendall(command.encode('utf-8'))

    def send_file(self, file_name):
        if file_name.startswith('download'):
            self.soc.send(file_name.encode())
            self.receive_file(file_name.split(' ')[1])
        else:
            self.soc.send(file_name.encode())
            response = self.soc.recv(1024).decode()
            print(response)




if __name__ == '__main__':
    client = Client('127.0.0.1', 12346)
    client.connect()
    file = "file.txt"
    while True:
        inp = input(">> ")
        if inp == 'exit':
            break

        elif inp == f"download {file}":
            client.send_file(file)
        else:
            client.send_command(inp)
  
